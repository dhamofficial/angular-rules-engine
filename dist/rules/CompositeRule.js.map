{"version":3,"file":"CompositeRule.js","sourceRoot":"","sources":["file:///C:/work/matt vaughn/buildmotion/angular-rules-engine/src/rules/CompositeRule.ts"],"names":[],"mappings":";;;;;;AAAA,2CAAwC;AACxC,2CAAwC;AAExC;IAAmC,iCAAU;IAKzC,uBAAY,IAAY,EAAE,OAAe,EAAE,aAAsB;QAAjE,YACI,kBAAM,IAAI,EAAE,OAAO,EAAE,aAAa,CAAC,SACtC;QAND,eAAS,GAAY,KAAK,CAAC;QAC3B,aAAO,GAAsB,IAAI,KAAK,EAAc,CAAC;QACrD,WAAK,GAAsB,IAAI,KAAK,EAAc,CAAC;;IAInD,CAAC;IAED,8BAAM,GAAN;QAAA,iBAGC;QAFG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,QAAQ,EAAV,CAAU,CAAC,CAAC,OAAO,CAAC,UAAA,CAAC,IAAI,OAAA,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC,EAA9B,CAA8B,CAAC,CAAC;QAC9E,MAAM,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC;IACjC,CAAC;IAEM,gCAAQ,GAAf;QACI,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACtC,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;QACD,MAAM,CAAC,KAAK,CAAC;IACjB,CAAC;IAED,sCAAc,GAAd;QACI,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,CAAC,OAAO,KAAK,KAAK,CAAC,EAArB,CAAqB,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC7D,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QAC1B,CAAC;QACD,MAAM,CAAC,IAAI,uBAAU,CAAC,IAAI,CAAC,CAAC;IAChC,CAAC;IACL,oBAAC;AAAD,CAAC,AA5BD,CAAmC,uBAAU,GA4B5C;AA5BY,sCAAa","sourcesContent":["import {RulePolicy} from './RulePolicy';\r\nimport {RuleResult} from './RuleResult';\r\n\r\nexport class CompositeRule extends RulePolicy {\r\n    hasErrors: boolean = false;\r\n    results: Array<RuleResult> = new Array<RuleResult>();\r\n    rules: Array<RulePolicy> = new Array<RulePolicy>();\r\n\r\n    constructor(name: string, message: string, isDisplayable: boolean) {\r\n        super(name, message, isDisplayable);\r\n    }\r\n\r\n    render(): RuleResult {\r\n        this.rules.sort(s => s.priority).forEach(r => this.results.push(r.execute()));\r\n        return this.processResults();\r\n    }\r\n\r\n    public hasRules(): boolean {\r\n        if (this.rules && this.rules.length > 0) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    processResults(): RuleResult {\r\n        if (this.results.filter(r => (r.isValid === false)).length > 0) {\r\n            this.isValid = false;\r\n            this.hasErrors = true;\r\n        }\r\n        return new RuleResult(this);\r\n    }\r\n}\r\n"]}