!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("typescript-dotnet-commonjs/System/Compare")):"function"==typeof define&&define.amd?define(["exports","typescript-dotnet-commonjs/System/Compare"],e):e(t.angularRulesEngine={},t["typescript-dotnet-commonjs/System/prototype"])}(this,function(t,e){"use strict";var r=function(){return function(t,e){this.isValid=!1,null!=t&&(this.rulePolicy=t,this.isValid=t.isValid,this.message=t.message),this.target=e}}();!function(t){t[t.ExitOnFirstFalseEvaluation=0]="ExitOnFirstFalseEvaluation",t[t.ExitOnFirstTrueEvaluation=1]="ExitOnFirstTrueEvaluation",t[t.EvaluateAllRules=2]="EvaluateAllRules"}(t.RenderType||(t.RenderType={})),function(t){t[t.Exception=0]="Exception",t[t.Warning=1]="Warning",t[t.Information=2]="Information"}(t.Severity||(t.Severity={}));var n=function(){function e(e,r,n,o,i){void 0===n&&(n=!1),void 0===o&&(o=t.Severity.Exception),void 0===i&&(i=0),this.isValid=!0,this.renderType=t.RenderType.EvaluateAllRules,this.severity=t.Severity.Exception,this.name=e,this.message=r,this.isDisplayable=n,this.priority=i,this.severity=o}return e.prototype.execute=function(){return console.log("Begin execution of RulePolicy: "+this.name),this.render()},e.prototype.render=function(){throw new Error("Each concrete rule must implement this function and return a valid Result.")},e}(),o=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=function(t){function e(e,r,n){var o=t.call(this,e,r,n)||this;return o.hasErrors=!1,o.results=new Array,o.rules=new Array,o}return o(e,t),e.prototype.render=function(){var t=this;return this.rules.sort(function(t){return t.priority}).forEach(function(e){return t.results.push(e.execute())}),this.processResults()},e.prototype.hasRules=function(){return!!(this.rules&&this.rules.length>0)},e.prototype.processResults=function(){return this.results.filter(function(t){return!1===t.isValid}).length>0&&(this.isValid=!1,this.hasErrors=!0),new r(this)},e}(n),s=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),u=function(t){function e(e,r,n){return t.call(this,e,r,n)||this}return s(e,t),e}(n),a=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),c=function(t){function e(e,r,n,o){void 0===o&&(o=!1);var i=t.call(this,e,r,o)||this;return i.target=n,i}return a(e,t),e.prototype.render=function(){return null==this.target||void 0===typeof this.target||void 0===this.target?this.isValid=!0:this.isValid=!1,new r(this,this.target)},e}(u),p=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),h=function(t){function e(e,r,n,o){void 0===o&&(o=!1);var i=t.call(this,e,r,o)||this;return i.target=n,i}return p(e,t),e.prototype.render=function(){return null!=this.target&&null!==this.target&&void 0!==this.target||(this.isValid=!1),new r(this,this.target)},e}(u),l=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),f=function(t){function e(e,r,n,o){void 0===o&&(o=!0);var i=t.call(this,e,r,o)||this;return i.target=n,i}return l(e,t),e.prototype.render=function(){return this.isValid=!0,!1===this.target&&(this.isValid=!1),new r(this,this.target)},e}(u),y=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),g=function(t){function e(e,r,n,o){void 0===o&&(o=!1);var i=t.call(this,e,r,o)||this;return i.target=n,i}return y(e,t),e.prototype.render=function(){return this.target&&(this.isValid=!1),new r(this,this.target)},e}(u),_=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),d=function(t){function n(e,r,n,o,i){void 0===i&&(i=!1);var s=t.call(this,e,r,i)||this;return s.target=n,s.comparison=o,s}return _(n,t),n.prototype.render=function(){return-1===e.compare(this.target,this.comparison,!0)&&(this.isValid=!1),new r(this,this.target)},n}(u),v=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),O=function(t){function n(e,r,n,o,i){void 0===i&&(i=!1);var s=t.call(this,e,r,i)||this;return s.target=n,s.comparison=o,s}return v(n,t),n.prototype.render=function(){return 1===e.compare(this.target,this.comparison,!0)&&(this.isValid=!1),new r(this,this.target)},n}(u),m=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),w=function(t){function e(e,r,n,o,i,s){void 0===s&&(s=!1);var u=t.call(this,e,r,s)||this;return u.target=n,u.start=o,u.end=i,u.isDisplayable=s,u.rules.push(new h("TargetIsNotNull","The target is null or undefined.",u.target)),null!=u.target&&(u.rules.push(new d("MinValue","The value must be equal to or greater than the start range value.",u.target,u.start)),u.rules.push(new O("MaxValue","The value must be equal to or less than the end range value.",u.target,u.end))),u}return m(e,t),e}(i),b=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),E=function(t){function n(e,r,n,o,i){void 0===i&&(i=!0);var s=t.call(this,e,r,i)||this;return s.target=n,s.comparison=o,s}return b(n,t),n.prototype.render=function(){return 0!==e.compare(this.target,this.comparison,!0)&&(this.isValid=!1),new r(this,this.target)},n}(u),M=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),j=function(t){function n(e,r,n,o,i){void 0===i&&(i=!0);var s=t.call(this,e,r,i)||this;return s.target=n,s.comparison=o,s}return M(n,t),n.prototype.render=function(){return 0===e.compare(this.target,this.comparison,!0)&&(this.isValid=!1),new r(this,this.target)},n}(u),T=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),P=function(t){function e(e,r,n,o,i,s){void 0===s&&(s=!1);var u=t.call(this,e,r,s)||this;return u.target=n,u.minLength=o,u.maxLength=i,u.configureRules(),u}return T(e,t),e.prototype.configureRules=function(){this.rules.push(new h("StringIsNotNull","The string target is null or undefined.",this.target)),null!=this.target&&this.rules.push(new w("TargetLengthIsWithinRange","The string value is not within the specified range.",this.target.toString().length,this.minLength,this.maxLength))},e}(i);!function(t){t[t.Information=1]="Information",t[t.Warning=2]="Warning",t[t.Error=3]="Error"}(t.MessageType||(t.MessageType={}));var V=function(){function e(){this.Messages=new Array}return e.prototype.addMessage=function(t){this.Messages.push(t)},e.prototype.hasErrors=function(){if(this.Messages&&this.Messages.length>0){if(this.Messages.filter(function(e){return e.MessageType===t.MessageType.Error}).length>0)return!0}return!1},e.prototype.isGood=function(){if(this.Messages&&this.Messages.length>0){if(this.Messages.filter(function(e){return e.MessageType===t.MessageType.Error}).length>0)return!1}return!0},e}(),S=function(){function t(t,e,r,n,o){void 0===o&&(o=!1),this.Name=t,this.Message=e,e&&(this.MessageType=r),n&&(this.Source=n)}return t.prototype.WithName=function(t){return this.Name=t,this},t.prototype.WithMessage=function(t){return this.Message=t,this},t.prototype.WithMessageType=function(t){return this.MessageType=t,this},t.prototype.WithSource=function(t){return this.Source=t,this},t.prototype.WithDisplayToUser=function(t){return this.DisplayToUser=t,this},t.prototype.toString=function(){return"Name: "+this.Name+"; Message: "+this.Message+"; MessageType: "+this.MessageType.toString()+"; Source: "+this.Source+"; DisplayToUser: "+this.DisplayToUser},t}();!function(t){t[t.NotEvaluated=0]="NotEvaluated",t[t.Success=1]="Success",t[t.Failure=2]="Failure"}(t.ValidationContextState||(t.ValidationContextState={}));var x=function(){function e(){this.state=t.ValidationContextState.NotEvaluated,this.results=new Array,this.rules=new Array,console.log("The [ValidationContext] is ready for action(s). All things are good until broken...")}return e.prototype.addRule=function(t){return this.source&&(t.source=this.source),this.rules.push(t),this},e.prototype.withSource=function(t){return this.source=t,this},e.prototype.renderRules=function(){var t=this;return this.results=new Array,this.rules&&this.rules.length<1?this:(this.rules.sort(function(t){return t.priority}).forEach(function(e){return t.results.push(e.execute())}),this)},e.prototype.hasRuleViolations=function(){var t=!1;if(this.rules){(this.rules&&this.rules.filter(function(t){return!1===t.isValid}).length)>0&&(t=!0)}return t},Object.defineProperty(e.prototype,"isValid",{get:function(){var t=!0;if(this.rules){this.rules.filter(function(t){return!1===t.isValid}).length>0&&(t=!1)}return t},enumerable:!0,configurable:!0}),e}();t.RuleResult=r,t.RulePolicy=n,t.CompositeRule=i,t.SimpleRule=u,t.IsNullOrUndefined=c,t.IsNotNullOrUndefined=h,t.IsTrue=f,t.IsFalse=g,t.Min=d,t.Max=O,t.Range=w,t.AreEqual=E,t.AreNotEqual=j,t.StringIsNotNullEmptyRange=P,t.ServiceContext=V,t.ServiceMessage=S,t.ValidationContext=x,Object.defineProperty(t,"__esModule",{value:!0})});